<?php 
    $fd = fopen (__FILE__, "r");
    $contents = fread ($fd, filesize (__FILE__));
    fclose ($fd);
    preg_match("/<h1[^>]*>([^<]*)<\/h1>/","$contents",$matches); 
    $pagtit = $matches[1];
    require_once("phead.html"); ?>

<h1>JSim Model Browser</h1>

<p>The Model Browser is an implimentation of the <a href="http://prefuse.org/">Prefuse Information Visualization Toolkit</a> which reads GraphML data generated by the JSim compiler to graphically represent variables and their dependencies or other relationships between variables.</p>
<p>
Contents:
<ul>
<li><a href="#usage">Using the Browser</a></li>
<li><a href="#interacting">Interacting with the Browser</a></li>
<li><a href="#renderingrules">Browser rendering rules</a></li>
<li><a href="#graphml">GraphML</a></li>
<?php jscoqli() ?>
</ul>
</p>

<h2><a name="usage">Using the Model Browser</a></h2>
There are currently two types of data relationships that can be graphed:
<ul>
<li><strong>Variables:</strong> Visualizes interdependencies between variables. Graph edges point (destination) to dependent variable. </li>
<li><strong>Sequence:</strong>  Visualizes order of calculations for the variables within JSim at runtime. Graph edges point to variable that gets calculated after the 'source' node (variable).</li>
</ul>

To view a graph of the model data:
<ol>
<li>Compile a model.</li>
<li>Go to the 'Browser' tab. The Model Browser window will be empty.</li>
<li>Select 'Render' -> 'Data select' -> type of data ('Variables', 'Sequence') from the drop-down menu.</li>
<li>Hit the 'Refresh' button to display the rendering.</li> 
</ol>

Depending on how powerful your computer is and how complicated a model you want graphed, you should see a <i>node -> edge</i> rendering of your data (It may take anywhere from 1 to 60 seconds to render the data).

<h3><a name="interacting">Interacting with the Browser rendering</a></h3>
After you have rendered the data you can currently interact with it in the following ways:
<ul>
<li><strong>Zoom in and out:</strong> Hold the 'right' mouse button down and move the mouse down to zoom in, up to to zoom out while mouse pointer is over the Model Browser window.</li>
<li><strong>Move a node:</strong> Point mouse cursor on a node, then click and hold 'left' button while moving mouse.</li>
<li><strong>Move entire graph rendering:</strong> Point mouse cursor on area that is Not a node, then click and hold 'left' button while moving mouse.</li>
<li><strong>Node information:</strong> Point mouse cursor on a node (no clicks). A popup window should display additional information about the node. Note: this is a temporary popup and will disappear after a few seconds.</li>
</ul>
JSim version 2.08 and above:
<ul> 
<li>Hitting the <strong>'Refresh'</strong> button will redraw the graph using updated rendering rules (see below).</li>
<li>Graph layout and render rules are saved when project file is saved.</li>
<li>To go back to default layout: Go to 'Render' drop down menu and pick <strong>Revert to default layout</strong>. Nodes will be aranged in default layout. </li>
</ul>
JSim version 2.07 and lower:
<ul>
<li>Hitting the 'Refresh' button will redraw the graph using original viewing paramters (All user interactions will be lost)</li>
<li>All user interactions with the browser are lost after closing project file.</li>
</ul>
<h3><a name="renderingrules">Changing Browser data rendering rules</a></h3>
You can change the coloring and shape of the nodes based on data rendering rules which are specified in the 'Render' drop-down menu. Here are the options:
<ul>
<li><strong>Collapse variables:</strong> (Checked by default for 'variables' graph) This removes variable nodes that are directly related to each other, collapsing them down to just one node. Example: t, t.min, t.max, and t.ct get collapsed down to just node 't'. Used only with 'variables' data.</li>
<li><strong>Node fill color:</strong> Group nodes by fill color. Default for 'variable' graph is unit type (Ex: all variable nodes with units of sec are one color while other variables with units of mmol/(g*min) have another. </li>
<li><strong>Node border color:</strong> Group nodes by border color. Default for 'variable' graph is tooltype (Example: tool types are domain, expression, external)  </li>
<li><strong>Node shape:</strong> Group nodes by shape. This is a boolean property (only two shapes currently supported). Default for 'variable' graph is 'isInput'. Example: if variable is an input then the node is circular, if it is an output then it is square. </li>

</ul>

<h2><a name="graphml">GraphML Output</a></h2>
<p>
<a href="http://graphml.graphdrawing.org/">GraphML</a> is a XML file format for graphs. The JSim compiler generates this file at compile time. To view and/or save the GraphML file for a compiled model, go to the 'Debug' tab from within the JSim UI. From there hit the 'View' drop-down menu and pick 'View GraphML'. The formated file should now be visable. To save, just hit 'File' -> 'Export text'.
</p>
<p>
The GraphML file generated by JSim may contain multiple graphs.The currently used graphs are the first one ('variables' graph) and the second one (the 'sequence' graph).
</p>


<?php jscoqfoot(); ?>
<p class="moddate">[This page was last modified 
<?php $moddatet = date("dMy, g:i a",filemtime(__FILE__));
    echo $moddatet; 
    echo ".] ";
?>
</p>

<?php require_once("ptail.html") ?>
